<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_110zs4y" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.12.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.15.0">
  <bpmn:process id="Process_0zjkhws" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" name="Данные с UI">
      <bpmn:outgoing>Flow_0o8kfxh</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0emf2c5" />
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0o8kfxh" sourceRef="StartEvent_1" targetRef="Gateway_19kkzm9" />
    <bpmn:exclusiveGateway id="Gateway_19kkzm9" name="Какой тип кейса CASE.CASETYPE?">
      <bpmn:incoming>Flow_0o8kfxh</bpmn:incoming>
      <bpmn:outgoing>Flow_07soa9b</bpmn:outgoing>
      <bpmn:outgoing>Flow_18ethdg</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_07soa9b" name="CASE.CASETYPE = 1 или 3" sourceRef="Gateway_19kkzm9" targetRef="Activity_0zn5c7q" />
    <bpmn:sequenceFlow id="Flow_18ethdg" name="CASE.CASETYPE = 2 или 4" sourceRef="Gateway_19kkzm9" targetRef="Activity_0cq9f1h" />
    <bpmn:endEvent id="Event_1ij2fns">
      <bpmn:incoming>Flow_0h084t7</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0h084t7" sourceRef="Activity_0zn5c7q" targetRef="Event_1ij2fns" />
    <bpmn:serviceTask id="Activity_0zn5c7q" name="Сохранение CASE.STATUS">
      <bpmn:incoming>Flow_07soa9b</bpmn:incoming>
      <bpmn:outgoing>Flow_0h084t7</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0cq9f1h" name="Сохранение CASE.STATUS">
      <bpmn:incoming>Flow_18ethdg</bpmn:incoming>
      <bpmn:outgoing>Flow_1vqb14x</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1vqb14x" sourceRef="Activity_0cq9f1h" targetRef="Activity_0a9dt30" />
    <bpmn:serviceTask id="Activity_0a9dt30" name="Сохранение&#10;PAYMENT.PAYMENTSOURCESTATUS">
      <bpmn:incoming>Flow_1vqb14x</bpmn:incoming>
      <bpmn:outgoing>Flow_14ossvz</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_14ossvz" sourceRef="Activity_0a9dt30" targetRef="Activity_1iu958u" />
    <bpmn:scriptTask id="Activity_1iu958u" name="Сделать сверку Статуса кейса и Статуса платежа">
      <bpmn:incoming>Flow_14ossvz</bpmn:incoming>
      <bpmn:outgoing>Flow_0xkwwp6</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_1h36zki" name="Требуется направить JSON ответ по операции?">
      <bpmn:incoming>Flow_0xkwwp6</bpmn:incoming>
      <bpmn:outgoing>Flow_0a0o4h4</bpmn:outgoing>
      <bpmn:outgoing>Flow_0i0cjh3</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0xkwwp6" sourceRef="Activity_1iu958u" targetRef="Gateway_1h36zki" />
    <bpmn:sequenceFlow id="Flow_0a0o4h4" name="ДА" sourceRef="Gateway_1h36zki" targetRef="Activity_0ka3373" />
    <bpmn:sequenceFlow id="Flow_1lwj8ru" sourceRef="Activity_0ka3373" targetRef="Activity_1ml066p" />
    <bpmn:scriptTask id="Activity_0ka3373" name="Сформировать JSON">
      <bpmn:incoming>Flow_0a0o4h4</bpmn:incoming>
      <bpmn:outgoing>Flow_1lwj8ru</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_1ml066p" name="Направить JSON в Kafka">
      <bpmn:incoming>Flow_1lwj8ru</bpmn:incoming>
      <bpmn:outgoing>Flow_1qn3nf9</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0ub4jlf">
      <bpmn:incoming>Flow_1qn3nf9</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1qn3nf9" sourceRef="Activity_1ml066p" targetRef="Event_0ub4jlf" />
    <bpmn:sequenceFlow id="Flow_0i0cjh3" name="НЕТ" sourceRef="Gateway_1h36zki" targetRef="Activity_1ff7xov" />
    <bpmn:scriptTask id="Activity_1ff7xov" name="Выброс false">
      <bpmn:incoming>Flow_0i0cjh3</bpmn:incoming>
    </bpmn:scriptTask>
    <bpmn:textAnnotation id="TextAnnotation_18rettk">
      <bpmn:text>CASE.ID
CASE.CASETYPE
CASE.STATUS</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_08eicvz" sourceRef="StartEvent_1" targetRef="TextAnnotation_18rettk" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_0zjkhws">
      <bpmndi:BPMNShape id="TextAnnotation_18rettk_di" bpmnElement="TextAnnotation_18rettk">
        <dc:Bounds x="140" y="80" width="123" height="54" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0o8kfxh_di" bpmnElement="Flow_0o8kfxh">
        <di:waypoint x="208" y="220" />
        <di:waypoint x="305" y="220" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07soa9b_di" bpmnElement="Flow_07soa9b">
        <di:waypoint x="330" y="195" />
        <di:waypoint x="330" y="150" />
        <di:waypoint x="450" y="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="344" y="116" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18ethdg_di" bpmnElement="Flow_18ethdg">
        <di:waypoint x="330" y="245" />
        <di:waypoint x="330" y="290" />
        <di:waypoint x="450" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="350" y="256" width="86" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0h084t7_di" bpmnElement="Flow_0h084t7">
        <di:waypoint x="550" y="150" />
        <di:waypoint x="593" y="150" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vqb14x_di" bpmnElement="Flow_1vqb14x">
        <di:waypoint x="550" y="290" />
        <di:waypoint x="600" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14ossvz_di" bpmnElement="Flow_14ossvz">
        <di:waypoint x="700" y="290" />
        <di:waypoint x="750" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xkwwp6_di" bpmnElement="Flow_0xkwwp6">
        <di:waypoint x="850" y="290" />
        <di:waypoint x="895" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0a0o4h4_di" bpmnElement="Flow_0a0o4h4">
        <di:waypoint x="945" y="290" />
        <di:waypoint x="1000" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="966" y="272" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lwj8ru_di" bpmnElement="Flow_1lwj8ru">
        <di:waypoint x="1100" y="290" />
        <di:waypoint x="1140" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qn3nf9_di" bpmnElement="Flow_1qn3nf9">
        <di:waypoint x="1240" y="290" />
        <di:waypoint x="1282" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i0cjh3_di" bpmnElement="Flow_0i0cjh3">
        <di:waypoint x="920" y="315" />
        <di:waypoint x="920" y="400" />
        <di:waypoint x="990" y="400" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="939" y="383" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Gateway_19kkzm9_di" bpmnElement="Gateway_19kkzm9" isMarkerVisible="true">
        <dc:Bounds x="305" y="195" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="237" y="153" width="86" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1agt663_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="172" y="202" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="159" y="245" width="62" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1eq42ci_di" bpmnElement="Activity_0zn5c7q">
        <dc:Bounds x="450" y="110" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1l1kqtw_di" bpmnElement="Activity_0cq9f1h">
        <dc:Bounds x="450" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ij2fns_di" bpmnElement="Event_1ij2fns">
        <dc:Bounds x="593" y="132" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qpbjhi_di" bpmnElement="Activity_0a9dt30">
        <dc:Bounds x="600" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_17qjulp_di" bpmnElement="Activity_1iu958u">
        <dc:Bounds x="750" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1h36zki_di" bpmnElement="Gateway_1h36zki" isMarkerVisible="true">
        <dc:Bounds x="895" y="265" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="877" y="203" width="86" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0vsps5c_di" bpmnElement="Activity_1ff7xov">
        <dc:Bounds x="990" y="360" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fvcl2t_di" bpmnElement="Activity_0ka3373">
        <dc:Bounds x="1000" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1kwhrga_di" bpmnElement="Activity_1ml066p">
        <dc:Bounds x="1140" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ub4jlf_di" bpmnElement="Event_0ub4jlf">
        <dc:Bounds x="1282" y="272" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_08eicvz_di" bpmnElement="Association_08eicvz">
        <di:waypoint x="190" y="202" />
        <di:waypoint x="190" y="134" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
